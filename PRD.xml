<?xml version="1.0" encoding="utf-8"?>
<!--
  Product Requirements Document (PRD)
  For: Leveraged Grid + DCA Hybrid Trading Bot
  Broker: Bybit (supports demo and live)
-->
<PRD version="1.0">
  <Metadata>
    <ProductName>LeveragedGridDCA_Hybrid_Bybit</ProductName>
    <Author>Generated by Assistant</Author>
    <Created>2025-09-16</Created>
    <Stakeholders>
      <Stakeholder>Trader / End User</Stakeholder>
      <Stakeholder>Developer / Engineer</Stakeholder>
      <Stakeholder>Risk Manager</Stakeholder>
    </Stakeholders>
  </Metadata>

  <ProblemStatement>
    Manual leveraged grid and DCA trading is time-consuming, error-prone, and difficult to scale. Traders need a low-maintenance, set-and-forget solution that can operate safely with leverage while maintaining medium risk-to-reward.
  </ProblemStatement>

  <Objectives>
    <Objective>Enable semi-passive leveraged trading using Bybit demo or live accounts.</Objective>
    <Objective>Combine grid trading with DCA safety to balance sideways and trending markets.</Objective>
    <Objective>Minimize user intervention through automation and clear monitoring tools.</Objective>
    <Objective>Ensure strict risk management to avoid liquidation and excessive drawdowns.</Objective>
  </Objectives>

  <Scope>
    <InScope>
      <Item>Integration with Bybit API (demo and live)</Item>
      <Item>Grid engine with configurable range, spacing, and order size</Item>
      <Item>DCA safety engine for trend continuation</Item>
      <Item>Backtesting and performance reporting</Item>
      <Item>Risk management features (kill-switch, breakeven stops, partial profits)</Item>
      <Item>Logging, monitoring, and notifications (Telegram, email)</Item>
    </InScope>
    <OutOfScope>
      <Item>Cross-exchange arbitrage</Item>
      <Item>Non-Bybit brokers</Item>
      <Item>Portfolio optimization across multiple bots</Item>
    </OutOfScope>
  </Scope>

  <UserStories>
    <UserStory id="U1">
      <As>Trader</As>
      <IWant>to run the bot in demo mode</IWant>
      <SoThat>I can test performance before going live.</SoThat>
    </UserStory>
    <UserStory id="U2">
      <As>Trader</As>
      <IWant>to define grid ranges and leverage</IWant>
      <SoThat>I can tailor strategy to market conditions.</SoThat>
    </UserStory>
    <UserStory id="U3">
      <As>RiskManager</As>
      <IWant>automatic kill-switches and breakeven stops</IWant>
      <SoThat>I can limit maximum drawdowns.</SoThat>
    </UserStory>
    <UserStory id="U4">
      <As>Developer</As>
      <IWant>backtesting with configurable metrics</IWant>
      <SoThat>I can validate the strategyâ€™s robustness.</SoThat>
    </UserStory>
  </UserStories>

  <FunctionalRequirements>
    <Requirement id="FR1">Bot must connect securely to Bybit API (demo or live).</Requirement>
    <Requirement id="FR2">Bot must support both grid and DCA execution engines.</Requirement>
    <Requirement id="FR3">Bot must log all orders, fills, and account state changes.</Requirement>
    <Requirement id="FR4">Bot must provide configurable leverage settings per pair.</Requirement>
    <Requirement id="FR5">Bot must export backtest results in CSV/HTML/JSON.</Requirement>
    <Requirement id="FR6">Bot must send alerts on critical events (margin > 60%, kill-switch triggered).</Requirement>
  </FunctionalRequirements>

  <NonFunctionalRequirements>
    <Requirement id="NFR1">System must handle up to 50 concurrent open orders.</Requirement>
    <Requirement id="NFR2">Latency to Bybit endpoints should be < 300ms.</Requirement>
    <Requirement id="NFR3">Bot uptime target is 99% with automatic recovery.</Requirement>
    <Requirement id="NFR4">State persistence must survive restarts (SQLite/Postgres).</Requirement>
    <Requirement id="NFR5">Logs must be rotated and retained for at least 30 days.</Requirement>
  </NonFunctionalRequirements>

  <KPIs>
    <KPI>Monthly return target: 5-10% (demo and live)</KPI>
    <KPI>Max drawdown: not to exceed 20%</KPI>
    <KPI>Profit factor: > 1.5 on backtests</KPI>
    <KPI>Win rate: > 55% of closed trades</KPI>
  </KPIs>

  <Assumptions>
    <Assumption>User has a funded Bybit account with demo and live access.</Assumption>
    <Assumption>User can provide API keys securely.</Assumption>
    <Assumption>Market volatility remains within historical norms (ATR range used).</Assumption>
  </Assumptions>

  <Risks>
    <Risk>High leverage increases liquidation risk if kill-switch fails.</Risk>
    <Risk>API downtime or rate limits could delay order execution.</Risk>
    <Risk>Poorly configured grids may trap capital in sideways markets.</Risk>
    <Risk>User may bypass demo testing and go live prematurely.</Risk>
  </Risks>

  <Milestones>
    <Milestone id="M1">Bot architecture and Bybit API integration (2 weeks)</Milestone>
    <Milestone id="M2">Grid engine implementation (2 weeks)</Milestone>
    <Milestone id="M3">DCA safety engine implementation (1 week)</Milestone>
    <Milestone id="M4">Backtesting framework and reporting (2 weeks)</Milestone>
    <Milestone id="M5">Risk management and monitoring (2 weeks)</Milestone>
    <Milestone id="M6">Demo mode testing and tuning (3 weeks)</Milestone>
    <Milestone id="M7">Live rollout (staged capital deployment) (ongoing)</Milestone>
  </Milestones>

  <AcceptanceCriteria>
    <Criterion>Bot successfully runs in demo mode with full logging for 4+ weeks.</Criterion>
    <Criterion>Backtest results meet defined KPIs.</Criterion>
    <Criterion>Kill-switch triggers under stress test scenarios.</Criterion>
    <Criterion>Switching from demo to live mode only requires parameter change, no code change.</Criterion>
  </AcceptanceCriteria>

  <Appendices>
    <Appendix id="A1">Glossary: Grid, DCA, Kill-switch, Breakeven, PnL</Appendix>
    <Appendix id="A2">Reference: Bybit API docs</Appendix>
    <Appendix id="A3">Reference: Risk management ruleset</Appendix>
  </Appendices>
</PRD>
